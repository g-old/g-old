import { GraphQLInt, GraphQLString, GraphQLID } from 'graphql';
import {{properCase name}}Type from '../types/{{properCase name}}Type';
import {{properCase name}} from '../models/{{properCase name}}';
import knex from '../knex';
import { createConnection } from '../utils';

const all{{properCase name}}s = createConnection(
  {{properCase name}}Type,
  {{properCase name}},
  async (cursorDate, cursorId, batchSize) => {
    return(
      knex('{{snakecase}}s')
        .whereRaw('({{snakecase name}}s.created_at, {{snakecase name}}s.id) < (?,?)', [
          cursorDate,
          cursorId,
        ])
        .limit(batchSize)
        .orderBy('{{snakecase name}}s.created_at', 'desc')
        .orderBy('{{snakecase name}}s.id', 'desc')
        .select('{{snakecase name}}s.id as id', '{{snakecase name}}s.created_at as time')
    );
  },
);

export default all{{properCase name}}s;







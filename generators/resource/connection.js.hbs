import { GraphQLInt, GraphQLString, GraphQLID } from 'graphql';
import {{properCase name}}Type from '../types/{{properCase name}}Type';
import {{properCase name}} from '../models/{{properCase name}}';
import knex from '../knex';
import { createConnection } from '../utils';

const all{{properCase name}}s = createConnection(
  {{properCase name}}Type,
  {{properCase name}},
  async (cursorDate, cursorId, batchSize) => {
    return(
      knex('{{snakeCase}}s')
        .whereRaw('({{snakeCase name}}s.created_at, {{snakeCase name}}s.id) < (?,?)', [
          cursorDate,
          cursorId,
        ])
        .limit(batchSize)
        .orderBy('{{snakeCase name}}s.created_at', 'desc')
        .orderBy('{{snakeCase name}}s.id', 'desc')
        .select('{{snakeCase name}}s.id as id', '{{snakeCase name}}s.created_at as time')
    );
  },
);

export default all{{properCase name}}s;






